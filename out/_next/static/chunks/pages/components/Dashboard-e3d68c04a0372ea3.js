(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{582:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/Dashboard",function(){return a(4344)}])},4486:e=>{"use strict";e.exports="https://ipa.rce.uz"},4344:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(4848),s=a(6540),l=a(2430),d=a.n(l),n=a(4335),o=a(4486),i=a.n(o),c=a(9972);let u=e=>new Date(e).toLocaleString("uz-UZ",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),h=()=>{let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(0),[o,h]=(0,s.useState)([]),[_,p]=(0,s.useState)(""),[f,m]=(0,s.useState)(1);(0,s.useEffect)(()=>{b()},[]);let g=()=>{n.A.get("".concat(i(),"/zakaz_products")).then(e=>{var a=JSON.parse(localStorage.getItem("user")),r=e.data.filter(e=>e.fastfood_id==a.id).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));h(r=function(e,t,a){let r=new Date(t),s=new Date(a);return e.filter(e=>{let t=new Date(e.created_at);return t>=r&&t<=s})}(r,document.querySelector("#start1").value,document.querySelector("#end1").value));let s=0;n.A.get("".concat(i(),"/categories")).then(e=>{n.A.get("".concat(i(),"/products")).then(d=>{var n=e.data.filter(e=>e.fastfood_id==a.id),o=[];for(let e=0;e<d.data.length;e++){d.data[e].push=!1;for(let t=0;t<n.length;t++)d.data[e].category_id==n[t].id&&(d.data[e].push=!0);d.data[e].push&&o.push(d.data[e])}for(let e=0;e<r.length;e++)for(let t=0;t<o.length;t++)r[e].product_id===o[t].id&&(r[e].product_name=o[t].name,r[e].price=o[t].price,s+=r[e].price*r[e].count);l(s),t(o)}).catch(e=>{console.error(e)})})}).catch(e=>{console.error(e)})},b=()=>{n.A.get("".concat(i(),"/zakaz_products")).then(e=>{var a=JSON.parse(localStorage.getItem("user")),r=e.data.filter(e=>e.fastfood_id==a.id).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));h(r);let s=0;n.A.get("".concat(i(),"/categories")).then(e=>{n.A.get("".concat(i(),"/products")).then(d=>{var n=e.data.filter(e=>e.fastfood_id==a.id),o=[];for(let e=0;e<d.data.length;e++){d.data[e].push=!1;for(let t=0;t<n.length;t++)d.data[e].category_id==n[t].id&&(d.data[e].push=!0);d.data[e].push&&o.push(d.data[e])}for(let e=0;e<r.length;e++)for(let t=0;t<o.length;t++)r[e].product_id===o[t].id&&(r[e].product_name=o[t].name,r[e].price=o[t].price,s+=r[e].price*r[e].count);l(s),t(o)}).catch(e=>{console.error(e)})})}).catch(e=>{console.error(e)})},x=o.slice((f-1)*10,10*f);return(0,r.jsxs)("div",{className:d().dashboard,children:[(0,r.jsx)("h2",{className:d().title,children:"Dashboard"}),(0,r.jsxs)("div",{className:d().stats,children:[(0,r.jsxs)("div",{className:d().statCard,children:[(0,r.jsx)("h3",{children:"Barcha haridlar"}),(0,r.jsxs)("p",{children:[a," so'm"]})]}),(0,r.jsxs)("div",{className:d().statCard,children:[(0,r.jsx)("h3",{children:"Sotuvlar"}),(0,r.jsx)("p",{children:o.length})]}),(0,r.jsxs)("div",{className:d().statCard,children:[(0,r.jsx)("h3",{children:"Maxsulotlarim"}),(0,r.jsx)("p",{children:e.length})]})]}),(0,r.jsx)(c.default,{}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Qidiruv...",value:_,onChange:e=>{p(e.target.value),h(o.filter(t=>t.product_name.toLowerCase().includes(e.target.value.toLowerCase())))},className:d().searchInput}),(0,r.jsxs)("div",{className:d()["date-filter"],style:{display:"flex"},children:[(0,r.jsx)("label",{className:d()["date-filter__label"],htmlFor:"start1",children:"Boshlash:"}),(0,r.jsx)("input",{type:"date",id:"start1",className:d()["date-filter__input"]}),(0,r.jsx)("label",{className:d()["date-filter__label"],htmlFor:"end1",children:"Tugash:"}),(0,r.jsx)("input",{type:"date",id:"end1",className:d()["date-filter__input"]}),(0,r.jsx)("button",{className:d()["date-filter__button"],onClick:()=>g(),children:"Filter"})]})]}),(0,r.jsxs)("div",{className:d().latestOrders,children:[(0,r.jsx)("h3",{children:"Sotuvlar"}),(0,r.jsx)("ul",{children:x.map((e,t)=>(0,r.jsxs)("li",{children:[e.product_name,(0,r.jsx)("p",{style:{fontSize:"12px"},children:u(e.created_at)}),(0,r.jsxs)("h5",{children:[e.price," so'm x ",e.count," ta"]}),(0,r.jsxs)("h5",{children:["Jami: ",e.price*e.count," so'm"]})]},t))}),(0,r.jsx)("div",{className:d().pagination,children:[...Array(Math.ceil(o.length/10))].map((e,t)=>(0,r.jsx)("button",{onClick:()=>m(t+1),children:t+1},t))})]})]})}},9972:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(4848),s=a(6540),l=a(4731),d=a(6118),n=a(2430),o=a.n(n),i=a(4335),c=a(4486),u=a.n(c);d.t1.register(...d.$L);let h=()=>{let[e,t]=(0,s.useState)(null);var[a,d]=(0,s.useState)([]);function n(e,t,a){let r=new Date(t),s=new Date(a);return e.filter(e=>{let t=new Date(e.created_at);return t>=r&&t<=s})}let c=()=>{i.A.get("".concat(u(),"/zakaz_products")).then(e=>{i.A.get("".concat(u(),"/products")).then(t=>{for(let a=0;a<e.data.length;a++)for(let r=0;r<t.data.length;r++)e.data[a].product_id==t.data[r].id&&(e.data[a].product_name=t.data[r].name);var a=e.data.filter(e=>e.fastfood_id==JSON.parse(localStorage.getItem("user")).id);h(n(a,document.querySelector("#start").value,document.querySelector("#end").value)),d(n(a,document.querySelector("#start").value,document.querySelector("#end").value))})})};(0,s.useEffect)(()=>{i.A.get("".concat(u(),"/zakaz_products")).then(e=>{i.A.get("".concat(u(),"/products")).then(t=>{for(let a=0;a<e.data.length;a++)for(let r=0;r<t.data.length;r++)e.data[a].product_id==t.data[r].id&&(e.data[a].product_name=t.data[r].name);d(e.data.filter(e=>e.fastfood_id==JSON.parse(localStorage.getItem("user")).id)),h(e.data.filter(e=>e.fastfood_id==JSON.parse(localStorage.getItem("user")).id))})})},[]);let h=e=>{let a={};e.forEach(e=>{a[e.product_name]?a[e.product_name]+=e.count:a[e.product_name]=e.count}),t({labels:Object.keys(a),datasets:[{label:"Sotilgan mahsulotlar soni",data:Object.values(a),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]})};return(0,r.jsxs)("div",{className:o().dashboard,children:[(0,r.jsxs)("div",{className:o()["date-filter"],children:[(0,r.jsx)("h2",{className:o()["date-filter__title"],children:"Sana Filtri"}),(0,r.jsx)("label",{className:o()["date-filter__label"],htmlFor:"start",children:"Boshlash:"}),(0,r.jsx)("input",{type:"date",id:"start",className:o()["date-filter__input"]}),(0,r.jsx)("label",{className:o()["date-filter__label"],htmlFor:"end",children:"Tugash:"}),(0,r.jsx)("input",{type:"date",id:"end",className:o()["date-filter__input"]}),(0,r.jsx)("button",{className:o()["date-filter__button"],onClick:()=>c(),children:"Filter"})]}),e?(0,r.jsx)(l.yP,{data:e,options:{scales:{y:{beginAtZero:!0}}}}):(0,r.jsx)("p",{children:"Ma'lumotlar yuklanmoqda..."})]})}},2430:e=>{e.exports={dashboard:"Dashboard_dashboard__q8TOG",title:"Dashboard_title__qr0XO",stats:"Dashboard_stats__azX8E",statCard:"Dashboard_statCard__NLeQN",button:"Dashboard_button__q3ueb",latestOrders:"Dashboard_latestOrders__NhqrF",searchInput:"Dashboard_searchInput__Eh7BC",pagination:"Dashboard_pagination__PZhh_",filters:"Dashboard_filters__WNPQi",selectedDateOrders:"Dashboard_selectedDateOrders__AMOoK","date-filter":"Dashboard_date-filter__KYLTu","date-filter__title":"Dashboard_date-filter__title__re8Pm","date-filter__label":"Dashboard_date-filter__label__tHyo5","date-filter__input":"Dashboard_date-filter__input__HGTEm","date-filter__button":"Dashboard_date-filter__button__FO2wz"}}},e=>{var t=t=>e(e.s=t);e.O(0,[201,335,454,636,593,792],()=>t(582)),_N_E=e.O()}]);