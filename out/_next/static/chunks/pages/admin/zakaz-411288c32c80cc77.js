(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{5896:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/zakaz",function(){return t(4654)}])},3159:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var n=t(4848);t(6540);var s=t(6715),i=t(5418),l=t.n(i);let r=e=>{let{children:a}=e,t=(0,s.useRouter)(),i=e=>{t.push("/admin/".concat(e))};return(0,n.jsxs)("div",{className:l().layout,children:[(0,n.jsxs)("header",{className:l().header,children:[(0,n.jsxs)("div",{onClick:()=>window.location="/admin/",className:l().logo,children:["menu",(0,n.jsx)("span",{children:"go"})]}),(0,n.jsxs)("nav",{className:l().nav,children:[(0,n.jsx)("button",{onClick:()=>i("fastfood"),children:"Users"}),(0,n.jsx)("button",{onClick:()=>i("dashboard"),children:"Daromat"}),(0,n.jsx)("button",{onClick:()=>i("zakaz"),children:"Zakazlar"}),(0,n.jsx)("button",{onClick:()=>i("users"),children:"Offitsant"})]})]}),(0,n.jsx)("main",{className:l().content,children:a}),(0,n.jsx)("footer",{className:l().footer,children:"\xa92025 Created by Your Name"})]})}},4486:e=>{"use strict";e.exports="https://ipa.rce.uz"},4654:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var n=t(4848),s=t(6540),i=t(4335),l=t(4486),r=t.n(l),c=t(3159),o=t(9959),d=t.n(o);function u(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)([]),[o,u]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[_,j]=(0,s.useState)([]),[m,g]=(0,s.useState)(null),[p,z]=(0,s.useState)(""),[f,k]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[w,B]=(0,s.useState)(1),[L,E]=(0,s.useState)(10);(0,s.useEffect)(()=>{(async()=>{let[e,t,n,s,c]=await Promise.all([i.A.get("".concat(r(),"/zakaz")),i.A.get("".concat(r(),"/zakaz_products")),i.A.get("".concat(r(),"/users")),i.A.get("".concat(r(),"/products")),i.A.get("".concat(r(),"/protsent"))]);c.data.length>0&&E(c.data[0].foiz);let o=n.data;u(o.filter(e=>1===e.type)),j(o.filter(e=>2===e.type)),a(e.data),l(t.data),x(s.data)})()},[]);let T=e=>{g(m===e?null:e)},A=e=>{let a=o.find(a=>a.id===e);return a?a.username:"Nomaʼlum"},P=e=>{let a=h.find(a=>a.id===e);return a?a.name:"Nomaʼlum"},D=e=>{let a=_.find(a=>a.id===e);return a?a.username:"Nomaʼlum"},M=()=>{let e=0;F.forEach(a=>{t.filter(e=>e.zakaz_id===a.id).forEach(a=>{e+=a.price*a.count})});let a=e*L/100,n=e+a;return{subtotal:e,addedPercent:a,final:n}},q=e=>{let a=t.filter(a=>a.zakaz_id===e).reduce((e,a)=>e+a.price*a.count,0),n=a*L/100;return{subtotal:a,addedPercent:n,final:a+n}},F=e.filter(e=>{let a=o.find(a=>a.id===e.user_id),t=a?a.username.toLowerCase():"",n=new Date(e.created_at),s=!p||n>=new Date(p),i=!f||n<=new Date(f+"T23:59:59");return(""==v||e.number_stol.toString().includes(v))&&(""==y||e.status==y)&&(""==S||t.includes(S.toLowerCase()))&&s&&i});t.reduce((e,a)=>e+a.price*a.count,0);let Z=10*w,K=Z-10,O=F.slice(K,Z),Q=Math.ceil(F.length/10);return(0,s.useEffect)(()=>{B(1)},[v,y,S,p,f]),(0,n.jsx)(c.A,{children:(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsx)("h2",{className:d().title,children:"Barcha Zakazlar"}),(0,n.jsxs)("div",{className:d().filterBar,children:[(0,n.jsx)("input",{type:"text",placeholder:"Stol raqami...",value:v,onChange:e=>N(e.target.value),className:d().input}),(0,n.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:d().select,children:[(0,n.jsx)("option",{value:"",children:"Barcha statuslar"}),(0,n.jsx)("option",{value:"0",children:"yangi"}),(0,n.jsx)("option",{value:"1",children:"bajarilmoqda"}),(0,n.jsx)("option",{value:"2",children:"tugadi"})]}),(0,n.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:d().select,children:[(0,n.jsx)("option",{value:"",children:"Barcha foydalanuvchilar"}),o.map(e=>(0,n.jsx)("option",{value:e.username,children:e.username},e.id))]}),(0,n.jsx)("input",{type:"date",value:p,onChange:e=>z(e.target.value),className:d().input}),(0,n.jsx)("input",{type:"date",value:f,onChange:e=>k(e.target.value),className:d().input})]}),(0,n.jsxs)("table",{className:d().table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Foydalanuvchi"}),(0,n.jsx)("th",{children:"Stol raqami"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Vaqt"}),(0,n.jsx)("th",{children:"Mahsulotlar"})]})}),(0,n.jsx)("tbody",{children:O.map((e,a)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:K+a+1}),(0,n.jsx)("td",{children:A(e.user_id)}),(0,n.jsx)("td",{children:e.number_stol}),(0,n.jsx)("td",{children:e.status}),(0,n.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:d().toggleBtn,onClick:()=>T(e.id),children:m===e.id?"Yopish":"Ko‘rish"})})]}),m===e.id&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"6",children:(0,n.jsx)("div",{className:d().accordionContent,children:(0,n.jsxs)("table",{className:d().innerTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Product nomi"}),(0,n.jsx)("th",{children:"FastFood"}),(0,n.jsx)("th",{children:"Narxi"}),(0,n.jsx)("th",{children:"Soni"})]})}),(0,n.jsx)("tbody",{children:t.filter(a=>a.zakaz_id===e.id).map((e,a)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:P(e.product_id)}),(0,n.jsx)("td",{children:D(e.fastfood_id)}),(0,n.jsx)("td",{children:e.price}),(0,n.jsx)("td",{children:e.count})]},a))}),(()=>{let{subtotal:a,addedPercent:t,final:s}=q(e.id);return(0,n.jsxs)("div",{className:d().innerTotalBox,children:[(0,n.jsxs)("p",{children:["Zakaz summasi: ",(0,n.jsxs)("strong",{children:[a.toLocaleString()," so‘m"]})]}),(0,n.jsxs)("p",{children:["Qo‘shilgan foiz (",L,"%): ",(0,n.jsxs)("strong",{children:[t.toLocaleString()," so‘m"]})]}),(0,n.jsxs)("p",{children:["Yakuniy summa: ",(0,n.jsxs)("strong",{children:[s.toLocaleString()," so‘m"]})]})]})})()]})})})})]},e.id))})]}),(0,n.jsxs)("div",{className:d().pagination,children:[(0,n.jsx)("button",{onClick:()=>B(e=>Math.max(e-1,1)),disabled:1===w,children:"\xab Oldingi"}),[...Array(Q)].map((e,a)=>(0,n.jsx)("button",{className:w===a+1?d().activePage:"",onClick:()=>B(a+1),children:a+1},a)),(0,n.jsx)("button",{onClick:()=>B(e=>Math.min(e+1,Q)),disabled:w===Q,children:"Keyingi \xbb"})]}),(()=>{let{subtotal:e,addedPercent:a,final:t}=M();return(0,n.jsxs)("div",{className:d().totalBox,children:[(0,n.jsxs)("p",{children:["Umumiy zakaz summasi: ",(0,n.jsxs)("strong",{children:[e.toLocaleString()," so‘m"]})]}),(0,n.jsxs)("p",{children:["Qo‘shilgan foiz (",L,"%): ",(0,n.jsxs)("strong",{children:[a.toLocaleString()," so‘m"]})]}),(0,n.jsxs)("p",{children:["Umumiy yakuniy summa: ",(0,n.jsxs)("strong",{children:[t.toLocaleString()," so‘m"]})]})]})})()]})})}},5418:e=>{e.exports={layout:"Layout_layout__Y0zgz",header:"Layout_header__3MyD7",nav:"Layout_nav__lgtID",logo:"Layout_logo__jEC1A",content:"Layout_content__EbiXf",footer:"Layout_footer__XhvoB"}},9959:e=>{e.exports={container:"zakaz_container__QdZkF",title:"zakaz_title__DnSih",table:"zakaz_table__RP40t",toggleBtn:"zakaz_toggleBtn__AWqKd",accordionContent:"zakaz_accordionContent__K5EMV",innerTable:"zakaz_innerTable__H7_qT",filterBar:"zakaz_filterBar___abr3",input:"zakaz_input__VdTvU",select:"zakaz_select__PQVtF",pagination:"zakaz_pagination__nx6ia",activePage:"zakaz_activePage__HMGyZ",totalBox:"zakaz_totalBox__lufje",innerTotalBox:"zakaz_innerTotalBox__d0Rkw"}},6715:(e,a,t)=>{e.exports=t(8440)}},e=>{var a=a=>e(e.s=a);e.O(0,[335,636,593,792],()=>a(5896)),_N_E=e.O()}]);