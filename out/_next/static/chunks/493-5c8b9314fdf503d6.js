(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{4486:e=>{"use strict";e.exports="https://ipa.rce.uz"},1493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(4848),l=a(6540),o=a(3919),s=a.n(o),n=a(4335),d=a(4486),i=a.n(d);a(6400);var c=a(6022);let u=()=>{var[e,t]=(0,l.useState)({});let[a,o]=(0,l.useState)([]),[d,u]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[_,h]=(0,l.useState)(""),[g,x]=(0,l.useState)(""),[f,j]=(0,l.useState)(null),[v,y]=(0,l.useState)([]),[N,b]=(0,l.useState)(!1),[S,C]=(0,l.useState)(""),[P,M]=(0,l.useState)(""),q=()=>{n.A.get("".concat(i(),"/products")).then(e=>{n.A.get("".concat(i(),"/categories")).then(t=>{var a=JSON.parse(localStorage.getItem("user")),r=t.data.filter(e=>e.fastfood_id==a.id);y(r);var l=[];for(let t=0;t<e.data.length;t++){e.data[t].push=!1;for(let a=0;a<r.length;a++)r[a].id==e.data[t].category_id&&(e.data[t].push=!0,e.data[t].category=r[a].name);e.data[t].push&&l.push(e.data[t])}o(l.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)))}).catch(e=>{})})},F=e=>{n.A.delete("".concat(i(),"/products/").concat(e)).then(e=>{alert("Malumot ochirildi"),q()}).catch(e=>{alert("Ochirishda xatolik bo`ldi")})};(0,l.useEffect)(()=>{q()},[]),(0,l.useEffect)(()=>{(null==e?void 0:e.id)&&(u(e.name),p(e.price),h(e.description),x(e.category_id),M(e.orders))},[e]);let k=e=>{b(!0),t(e)};return(0,r.jsxs)("div",{className:s().formContainer,children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData;t.append("name",d),t.append("price",m),t.append("description",_),t.append("category_id",g),t.append("image",f),t.append("orders",P),f?n.A.post("".concat(i(),"/products"),t).then(e=>{q(),u(""),p(""),h(""),x(""),M(""),j(null),document.querySelector("#file_2").value=""}).catch(e=>{console.error(e)}):alert("Rasmni tanlang")},children:[(0,r.jsx)("input",{className:s().input,type:"text",placeholder:"Mahsulot nomi",value:d,onChange:e=>u(e.target.value)}),(0,r.jsx)("input",{className:s().input,type:"number",placeholder:"Narx",value:m,onChange:e=>p(e.target.value)}),(0,r.jsx)("input",{className:s().input,type:"number",placeholder:"Tartib raqami (orders)",value:P,onChange:e=>M(e.target.value)}),(0,r.jsx)("input",{className:s().input,type:"text",placeholder:"Tavsif",value:_,onChange:e=>h(e.target.value)}),(0,r.jsxs)("select",{className:s().input,value:g,onChange:e=>x(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Tanlang"}),v.map((e,t)=>(0,r.jsx)("option",{value:e.id,children:e.name},t))]}),(0,r.jsxs)("label",{children:["Rasm yuklash:",(0,r.jsx)("input",{type:"file",id:"file_2",onChange:e=>j(e.target.files[0])})]}),(0,r.jsx)("br",{}),(0,r.jsx)("button",{className:s().button,type:"submit",children:"Qo'shish"})]}),(0,r.jsxs)("div",{className:s().filterContainer,children:[(0,r.jsx)("label",{children:"Kategoriya bo‘yicha filter:"}),(0,r.jsxs)("select",{className:s().input,value:S,onChange:e=>C(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Barchasi"}),v.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("div",{className:s().productGrid,children:a.filter(e=>""===S||e.category_id===+S).map(e=>(0,r.jsxs)("div",{className:s().productCard,children:[(0,r.jsx)("img",{src:e.image,alt:e.name,className:s().cardImage}),(0,r.jsx)("h3",{children:e.name}),(0,r.jsx)("p",{children:e.description}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Narx:"})," ",e.price," so'm"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Kategoriya:"})," ",e.category]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Tartib raqami:"})," ",e.orders]})," ",(0,r.jsxs)("div",{className:s().cardButtons,children:[(0,r.jsx)("button",{onClick:()=>k(e),className:s().editButton,children:"✏️"}),(0,r.jsx)("button",{onClick:()=>F(e.id),className:s().deleteButton,children:"\uD83D\uDDD1️"})]})]},e.id))}),(0,r.jsx)(c.default,{data:e,isOpen:N,onClose:()=>{b(!1),q()}})]})}},6022:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(4848),l=a(6540),o=a(5728),s=a.n(o),n=a(4335),d=a(4486),i=a.n(d);let c=e=>{let{isOpen:t,onClose:a,data:o}=e,[d,c]=(0,l.useState)([]),[u,m]=(0,l.useState)(!1),[p,_]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[b,S]=(0,l.useState)("");(0,l.useEffect)(()=>{t?document.querySelector("#productModal").style.display="block":document.querySelector("#productModal").style.display="none"},[t]),(0,l.useEffect)(()=>{o&&t&&(_(o.name||""),g(o.description||""),f(o.price||""),v(o.category_id||""),N(o.image||""),S(o.orders||""),m(!1))},[o,t]);let C=()=>{n.A.get("".concat(i(),"/categories")).then(e=>{let t=JSON.parse(localStorage.getItem("user"));c(e.data.filter(e=>e.fastfood_id===t.id))}).catch(e=>{console.error(e)})};return(0,l.useEffect)(()=>{C()},[]),(0,r.jsx)("div",{id:"productModal",className:s().modal,children:(0,r.jsxs)("div",{className:s().modal__content,children:[(0,r.jsx)("span",{className:s().modal__close,onClick:a,children:"\xd7"}),(0,r.jsx)("h2",{className:s().modal__title,children:"Mahsulot Ma'lumotlari"}),(0,r.jsxs)("form",{className:s().modal__form,onSubmit:e=>{e.preventDefault();let t=new FormData;if(t.append("name",p),t.append("category_id",j),t.append("description",h),t.append("price",x),t.append("orders",b),u){let e=document.querySelector("#fileInput").files[0];t.append("image",e)}else t.append("image",y);n.A.put("".concat(i(),"/products/fastfood/").concat(o.id),t).then(e=>{alert("Mahsulot o'zgartirildi!"),a()}).catch(e=>{alert("Xatolik yuz berdi: "+e.message)})},children:[(0,r.jsx)("input",{className:s().modal__input,value:p,onChange:e=>_(e.target.value),type:"text",placeholder:"Mahsulot Nomi",required:!0}),(0,r.jsxs)("select",{className:s().modal__input,value:j,onChange:e=>v(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Tanlang"}),d.map((e,t)=>(0,r.jsx)("option",{value:e.id,children:e.name},t))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked)})," File"]}),u?(0,r.jsx)("input",{id:"fileInput",className:s().modal__input,type:"file",required:!0}):(0,r.jsx)("input",{id:"imageInput",className:s().modal__input,value:y,onChange:e=>N(e.target.value),type:"text",placeholder:"Rasm URL",required:!0}),(0,r.jsx)("textarea",{className:s().modal__textarea,value:h,onChange:e=>g(e.target.value),placeholder:"Taʼrif",required:!0}),(0,r.jsx)("input",{className:s().modal__input,value:b,onChange:e=>S(e.target.value),type:"number",placeholder:"Tartib raqami (orders)",required:!0}),(0,r.jsx)("input",{className:s().modal__input,value:x,onChange:e=>f(e.target.value),type:"number",placeholder:"Narxi",required:!0}),(0,r.jsx)("button",{className:s().modal__button,type:"submit",children:"Saqlash"})]})]})})}},3919:e=>{e.exports={formContainer:"ProductForm_formContainer__qhryf",input:"ProductForm_input__ZVRMQ",button:"ProductForm_button___RsO0",list:"ProductForm_list__2yRhP",listItem:"ProductForm_listItem__x_qhz",deleteButton:"ProductForm_deleteButton__MOpPz",productImage:"ProductForm_productImage__2PXUx",editButton:"ProductForm_editButton__gYbLc",productGrid:"ProductForm_productGrid__pGNre",productCard:"ProductForm_productCard__gnnpt",cardImage:"ProductForm_cardImage__uuPCy",cardButtons:"ProductForm_cardButtons__66Kfa",filterContainer:"ProductForm_filterContainer__feeWv"}},5728:e=>{e.exports={modal:"ProductModal_modal__JYWs8",modal__content:"ProductModal_modal__content__57uHR",modal__close:"ProductModal_modal__close___SN2S",modal__title:"ProductModal_modal__title__BKB_5",modal__form:"ProductModal_modal__form__lqH77",modal__input:"ProductModal_modal__input__TRsSw",modal__textarea:"ProductModal_modal__textarea__etuDa",modal__label:"ProductModal_modal__label__Ud1gl",modal__button:"ProductModal_modal__button__yOrCo"}},6400:(e,t,a)=>{"use strict";a(6192),a(8315).SuffixPathnameNormalizer},8315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SuffixPathnameNormalizer",{enumerable:!0,get:function(){return a}});class a{constructor(e){this.suffix=e}match(e){return!!e.endsWith(this.suffix)}normalize(e,t){return t||this.match(e)?e.substring(0,e.length-this.suffix.length):e}}}}]);