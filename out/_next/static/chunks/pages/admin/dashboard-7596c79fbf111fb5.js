(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{394:(e,a,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return l(8183)}])},3159:(e,a,l)=>{"use strict";l.d(a,{A:()=>o});var t=l(4848);l(6540);var s=l(6715),r=l(5418),d=l.n(r);let o=e=>{let{children:a}=e,l=(0,s.useRouter)(),r=e=>{l.push("/admin/".concat(e))};return(0,t.jsxs)("div",{className:d().layout,children:[(0,t.jsxs)("header",{className:d().header,children:[(0,t.jsxs)("div",{onClick:()=>window.location="/admin/",className:d().logo,children:["menu",(0,t.jsx)("span",{children:"go"})]}),(0,t.jsxs)("nav",{className:d().nav,children:[(0,t.jsx)("button",{onClick:()=>r("fastfood"),children:"Users"}),(0,t.jsx)("button",{onClick:()=>r("dashboard"),children:"Daromat"}),(0,t.jsx)("button",{onClick:()=>r("zakaz"),children:"Zakazlar"}),(0,t.jsx)("button",{onClick:()=>r("users"),children:"Offitsant"})]})]}),(0,t.jsx)("main",{className:d().content,children:a}),(0,t.jsx)("footer",{className:d().footer,children:"\xa92025 Created by Your Name"})]})}},4486:e=>{"use strict";e.exports="https://ipa.rce.uz"},8183:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>h});var t=l(4848),s=l(6540),r=l(3159),d=l(4335),o=l(4486),n=l.n(o),c=l(7110),i=l.n(c);function h(){let[e,a]=(0,s.useState)([]),[l,o]=(0,s.useState)({}),[c,h]=(0,s.useState)([]),[m,u]=(0,s.useState)(!1),[b,x]=(0,s.useState)(null),[_,j]=(0,s.useState)(""),[C,N]=(0,s.useState)(""),[p,f]=(0,s.useState)(10);(0,s.useEffect)(()=>{(async()=>{try{let e=(await d.A.get("".concat(n(),"/users"))).data.filter(e=>2===e.type);a(e)}catch(e){console.error("Foydalanuvchilarni olishda xatolik:",e)}})()},[]);let k=async e=>{var a;x(e);let[l,t,s]=await Promise.all([d.A.get("".concat(n(),"/products")),d.A.get("".concat(n(),"/zakaz_products")),d.A.get("".concat(n(),"/protsent"))]),r=l.data,o=t.data.filter(a=>a.fastfood_id==e),c=(null===(a=s.data[0])||void 0===a?void 0:a.foiz)||10;f(c);for(let e=0;e<o.length;e++){let a=r.find(a=>a.id===o[e].product_id);a&&(o[e].name=a.name),o[e].foizSum=o[e].price*o[e].count*c/100,o[e].total=o[e].price*o[e].count,o[e].totalWithFoiz=o[e].total+o[e].foizSum}h(o),u(!0)},y=async e=>{try{let a=(await d.A.get("".concat(n(),"/zakaz_products"))).data.filter(a=>a.fastfood_id===e),l=0;for(let e=0;e<a.length;e++){let t=a[e];l+=t.price*t.count}o(a=>({...a,[e]:Math.round(l)}))}catch(e){console.error("Hisoblashda xatolik:",e)}},H=c.reduce((e,a)=>e+a.total,0),v=c.reduce((e,a)=>e+a.foizSum,0),z=c.reduce((e,a)=>e+a.totalWithFoiz,0);return(0,t.jsx)(r.A,{children:(0,t.jsxs)("div",{className:i().layout,children:[(0,t.jsxs)("div",{className:i().tableContainer,children:[(0,t.jsx)("h2",{children:"Foydalanuvchilar (FastFood)"}),(0,t.jsxs)("table",{className:i().table,children:[(0,t.jsx)("thead",{className:i().tableHeader,children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:i().tableHeaderCell,children:"#"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Ism"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Telefon"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Faolmi"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Ishlab topgan"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Zakazlar"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Hisoblash"})]})}),(0,t.jsx)("tbody",{children:e.map((e,a)=>(0,t.jsxs)("tr",{className:i().tableRow,children:[(0,t.jsx)("td",{className:i().tableCell,children:a+1}),(0,t.jsx)("td",{className:i().tableCell,children:e.username}),(0,t.jsx)("td",{className:i().tableCell,children:e.phone_number||"Nomaʼlum"}),(0,t.jsx)("td",{className:i().tableCell,children:e.is_active?"✅":"❌"}),(0,t.jsx)("td",{className:i().tableCell,children:void 0!==l[e.id]?"".concat(l[e.id].toLocaleString()," so'm"):"-"}),(0,t.jsx)("td",{className:i().tableCell,children:(0,t.jsx)("button",{onClick:()=>k(e.id),className:i().tableCellButton,children:"Zakazlar"})}),(0,t.jsx)("td",{className:i().tableCell,children:(0,t.jsx)("button",{onClick:()=>y(e.id),className:i().tableCellButton,children:"Hisoblash"})})]},e.id))})]})]}),m&&b&&(0,t.jsx)("div",{className:i().modalBackdrop,children:(0,t.jsxs)("div",{className:i().modalContent,children:[(0,t.jsxs)("h2",{className:i().modalHeader,children:["Zakazlar va Productlar (User: ",b,")"]}),(0,t.jsx)("button",{onClick:()=>{u(!1)},className:i().modalCloseButton,children:"Yopish"}),(0,t.jsxs)("div",{className:i().inputContainer,children:[(0,t.jsx)("label",{children:"Start Date:"}),(0,t.jsx)("input",{type:"date",value:_,onChange:e=>j(e.target.value)}),(0,t.jsx)("label",{children:"End Date:"}),(0,t.jsx)("input",{type:"date",value:C,onChange:e=>N(e.target.value)}),(0,t.jsx)("button",{onClick:()=>{if(!_||!C){alert("Iltimos, sanalarni kiriting!");return}h(c.filter(e=>{let a=new Date(e.created_at);return a>=new Date(_)&&a<=new Date(C)}))},className:i().button,children:"Filtrlash"})]}),(0,t.jsxs)("table",{className:i().table,children:[(0,t.jsx)("thead",{className:i().tableHeader,children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Zakaz ID"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Product ID"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Nomi"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Narxi"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Miqdori"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Jami"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Foizdan"}),(0,t.jsx)("th",{className:i().tableHeaderCell,children:"Jami + Foiz"})]})}),(0,t.jsx)("tbody",{children:c.map((e,a)=>(0,t.jsxs)("tr",{className:i().tableRow,children:[(0,t.jsx)("td",{className:i().tableCell,children:e.zakaz_id}),(0,t.jsx)("td",{className:i().tableCell,children:e.product_id}),(0,t.jsx)("td",{className:i().tableCell,children:e.name}),(0,t.jsx)("td",{className:i().tableCell,children:e.price}),(0,t.jsx)("td",{className:i().tableCell,children:e.count}),(0,t.jsx)("td",{className:i().tableCell,children:e.total}),(0,t.jsx)("td",{className:i().tableCell,children:e.foizSum.toFixed(2)}),(0,t.jsx)("td",{className:i().tableCell,children:e.totalWithFoiz.toFixed(2)})]},a))})]}),(0,t.jsxs)("div",{className:i().summaryBox,children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Jami narx:"})," ",H.toLocaleString()," so'm"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Jami foiz:"})," ",v.toLocaleString()," so'm"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Jami yakuniy:"})," ",z.toLocaleString()," so'm"]})]})]})})]})})}},5418:e=>{e.exports={layout:"Layout_layout__Y0zgz",header:"Layout_header__3MyD7",nav:"Layout_nav__lgtID",logo:"Layout_logo__jEC1A",content:"Layout_content__EbiXf",footer:"Layout_footer__XhvoB"}},7110:e=>{e.exports={layout:"Dashboard_layout__IExan","table-container":"Dashboard_table-container__QfVkN",table:"Dashboard_table__Ya4zb",tableHeader:"Dashboard_tableHeader__dIXZY",tableHeaderCell:"Dashboard_tableHeaderCell__H4Hbb",tableRow:"Dashboard_tableRow__kC_oD",tableCell:"Dashboard_tableCell__y8TBx",tableCellButton:"Dashboard_tableCellButton__PTLKG",modalBackdrop:"Dashboard_modalBackdrop__WsHl6",modalContent:"Dashboard_modalContent__DXcDf",modalHeader:"Dashboard_modalHeader__3guri",modalCloseButton:"Dashboard_modalCloseButton__RlxT3",inputContainer:"Dashboard_inputContainer__kw5I0",button:"Dashboard_button__TePR1"}},6715:(e,a,l)=>{e.exports=l(8440)}},e=>{var a=a=>e(e.s=a);e.O(0,[335,636,593,792],()=>a(394)),_N_E=e.O()}]);