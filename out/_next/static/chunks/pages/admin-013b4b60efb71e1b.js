(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{8488:(a,e,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(9752)}])},3159:(a,e,t)=>{"use strict";t.d(e,{A:()=>o});var d=t(4848);t(6540);var r=t(6715),i=t(5418),n=t.n(i);let o=a=>{let{children:e}=a,t=(0,r.useRouter)(),i=a=>{t.push("/admin/".concat(a))};return(0,d.jsxs)("div",{className:n().layout,children:[(0,d.jsxs)("header",{className:n().header,children:[(0,d.jsxs)("div",{onClick:()=>window.location="/admin/",className:n().logo,children:["menu",(0,d.jsx)("span",{children:"go"})]}),(0,d.jsxs)("nav",{className:n().nav,children:[(0,d.jsx)("button",{onClick:()=>i("fastfood"),children:"Users"}),(0,d.jsx)("button",{onClick:()=>i("dashboard"),children:"Daromat"}),(0,d.jsx)("button",{onClick:()=>i("zakaz"),children:"Zakazlar"}),(0,d.jsx)("button",{onClick:()=>i("users"),children:"Offitsant"})]})]}),(0,d.jsx)("main",{className:n().content,children:e}),(0,d.jsx)("footer",{className:n().footer,children:"\xa92025 Created by Your Name"})]})}},4486:a=>{"use strict";a.exports="https://ipa.rce.uz"},9752:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>h});var d=t(4848),r=t(3159),i=t(6540),n=t(4335),o=t(4044),s=t.n(o),l=t(4731),c=t(6118),p=t(4486),_=t.n(p);c.t1.register(...c.$L);let u=()=>{let[a,e]=(0,i.useState)([]),[t,r]=(0,i.useState)([]),[o,c]=(0,i.useState)([]),[p,u]=(0,i.useState)({}),[h,m]=(0,i.useState)({}),[x,g]=(0,i.useState)({}),[b,y]=(0,i.useState)({});(0,i.useEffect)(()=>{let a=async()=>{try{let a=await n.A.get("".concat(_(),"/zakaz_products"));r(a.data)}catch(a){console.error("Error fetching zakaz products:",a)}},t=async()=>{try{let a=await n.A.get("".concat(_(),"/zakaz"));c(a.data)}catch(a){console.error("Error fetching orders:",a)}};(async()=>{try{let a=(await n.A.get("".concat(_(),"/users"))).data.filter(a=>2===a.type&&a.is_active);e(a)}catch(a){console.error("Error fetching fastfoods:",a)}})(),a(),t()},[]);let f=()=>{let e={},d={},r={};a.forEach(a=>{let i=a.id;t.forEach(a=>{if(a.fastfood_id===i){let t=a.price*(a.count||0),n=new Date(a.created_at),o=n.toISOString().split("T")[0],s=n.toISOString().slice(0,7);e[o]=(e[o]||0)+t,d[s]=(d[s]||0)+t,r[i]||(r[i]={daily:{},monthly:{}}),r[i].daily[o]=(r[i].daily[o]||0)+t,r[i].monthly[s]=(r[i].monthly[s]||0)+t}})}),u(e),m(d),y(r)},j=()=>{g(o.reduce((a,e)=>{let t=new Date(e.created_at).toISOString().split("T")[0];return a[t]=(a[t]||0)+1,a},{}))};(0,i.useEffect)(()=>{f(),j()},[a,t,o]);let k=()=>{let a={},e=new Date;for(let t=0;t<30;t++){let d=new Date(e);d.setDate(e.getDate()-t),a[d.toISOString().split("T")[0]]=0}return a},v=a.map(a=>a.username),w=a.map(a=>{let e=a.id;return Object.keys(k()).map(a=>{var t;return(null===(t=b[e])||void 0===t?void 0:t.daily[a])||0})});return(0,d.jsxs)("div",{className:s().adminContainer,children:[(0,d.jsx)("h2",{children:"Admin Panel"}),(0,d.jsx)("p",{children:"Fastfoodlar uchun oylik va kunlik daromadlar:"}),(0,d.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",marginTop:"20px"},children:[(0,d.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"10px",width:"600px",height:"400px",paddingBottom:"30px"},children:[(0,d.jsx)("h3",{children:"Kunlik Daromad (Oxirgi 30 kun)"}),(0,d.jsx)(l.N1,{data:{labels:Object.keys(k()),datasets:[{label:"Kunlik Daromad",data:Object.keys(k()).map(a=>p[a]||0),borderColor:"#80deea",backgroundColor:"rgba(128, 222, 238, 0.5)",fill:!0}]},options:{maintainAspectRatio:!1}})]}),(0,d.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"10px",width:"600px",height:"400px",paddingBottom:"30px"},children:[(0,d.jsx)("h3",{children:"Oylik Daromad"}),(0,d.jsx)(l.N1,{data:{labels:Object.keys(h),datasets:[{label:"Oylik Daromad",data:Object.values(h),borderColor:"#e0f7fa",backgroundColor:"rgba(224, 247, 251, 0.5)",fill:!0}]},options:{maintainAspectRatio:!1}})]}),(0,d.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"10px",width:"600px",height:"400px",paddingBottom:"33px"},children:[(0,d.jsx)("h3",{children:"Kunlik Buyurtmalar (Oxirgi 30 kun)"}),(0,d.jsx)(l.N1,{data:{labels:Object.keys(k()),datasets:[{label:"Kunlik Buyurtmalar",data:Object.keys(k()).map(a=>x[a]||0),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.5)",fill:!0}]},options:{maintainAspectRatio:!1}})]}),(0,d.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"10px",width:"600px",height:"400px",paddingBottom:"30px"},children:[(0,d.jsx)("h3",{children:"Fastfoodlar - Kunlik Daromad"}),(0,d.jsx)(l.yP,{data:{labels:v,datasets:[{label:"Kunlik Daromad",data:w.reduce((a,e)=>(e.forEach((e,t)=>{a[t]=(a[t]||0)+e}),a),[]),backgroundColor:"rgba(128, 222, 238, 0.5)"}]},options:{maintainAspectRatio:!1}})]})]})]})};function h(){return(0,d.jsx)(r.A,{children:(0,d.jsx)(u,{})})}},5418:a=>{a.exports={layout:"Layout_layout__Y0zgz",header:"Layout_header__3MyD7",nav:"Layout_nav__lgtID",logo:"Layout_logo__jEC1A",content:"Layout_content__EbiXf",footer:"Layout_footer__XhvoB"}},4044:a=>{a.exports={"admin-page":"AdminPage_admin-page__5pJ0f","admin-page__title":"AdminPage_admin-page__title__NJGiv","admin-page__welcome":"AdminPage_admin-page__welcome___KLJ_","admin-page__chart":"AdminPage_admin-page__chart__xnmd2","admin-page__date-select":"AdminPage_admin-page__date-select__0L2TZ","admin-page__label":"AdminPage_admin-page__label__1l0ro","admin-page__input":"AdminPage_admin-page__input__MVqY1"}},6715:(a,e,t)=>{a.exports=t(8440)}},a=>{var e=e=>a(a.s=e);a.O(0,[201,335,454,636,593,792],()=>e(8488)),_N_E=a.O()}]);